{"version":3,"sources":["views/Notice/Archive.jsx"],"names":["ArchiveNotice","uploadService","useState","uploads","setUploads","error","setError","page","URLSearchParams","useLocation","search","get","dispatch","useAppContext","type","useParams","useEffect","SET_PAGE_TITLE","value","i18n","t","getUploads","category","then","u","err","calculateWeeksFromNow","createdAt","createdDate","Date","diffInMilliseconds","getTime","Math","floor","className","data","map","key","id","to","description","created_at","total_pages"],"mappings":"oLAwDeA,UAjDf,YAAyC,IAAjBC,EAAgB,EAAhBA,cAAgB,EACRC,mBAAS,MADD,mBAC/BC,EAD+B,KACtBC,EADsB,OAEZF,mBAAS,MAFG,mBAE/BG,EAF+B,KAExBC,EAFwB,KAIhCC,EADQ,IAAIC,gBAAgBC,cAAcC,QAC7BC,IAAI,QAChBC,EAAYC,cAAZD,SACAE,EAAQC,cAARD,KAGPE,qBAAU,WACRJ,EAAS,CAACE,KAAMG,IAAgBC,MAAOC,IAAKC,EAAE,0BAE9CnB,EAAcoB,WAAW,CACvBP,KAAM,OACNQ,SAAUR,EACVP,SACCgB,MAAK,SAACC,GACPpB,EAAWoB,MACV,SAACC,GACFnB,EAASmB,QAEV,CAACb,EAAUL,EAAMO,EAAMb,IAE1B,IAAMyB,EAAwB,SAACC,GAC7B,IAAMC,EAAc,IAAIC,KAAKF,GAEvBG,GADM,IAAID,MACeE,UAAYH,EAAYG,UAEvD,OADoBC,KAAKC,MAAMH,EAAkB,SAInD,OAAO3B,GACL,yBAAK+B,UAAU,0BACb,kBAAC,IAAD,CAAO7B,MAAOA,IACd,0BAAM6B,UAAU,cAAcf,IAAKC,EAAL,iBAAiBN,EAAjB,cAC9B,yBAAKoB,UAAU,QACb,4BACG/B,EAAQgC,MAAQhC,EAAQgC,KAAKC,KAAI,SAACZ,GAAD,OAChC,wBAAIa,IAAK,QAAUb,EAAEc,IACnB,kBAAC,IAAD,CAAMC,GAAE,kBAAazB,EAAb,YAAqBU,EAAEc,KAAOd,EAAEgB,YAAxC,IAAsDd,EAAsBF,EAAEiB,YAAc,EAAtC,gBAAmDf,EAAsBF,EAAEiB,YAA3E,2BAAqG,YAKnK,kBAAC,IAAD,CAAYlC,KAAMJ,EAAQI,KAAMmC,YAAavC,EAAQuC","file":"static/js/12.2d04f144.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport Pagination from \"../../components/Pagination/Pagination\";\nimport {Link, useLocation, useParams} from \"react-router-dom\";\nimport Error from \"../../components/Error/Error\";\nimport i18n from \"../../utils/i18n\";\nimport {SET_PAGE_TITLE, useAppContext} from \"../../context/app\";\n\nfunction ArchiveNotice({uploadService}) {\n  const [uploads, setUploads] = useState(null);\n  const [error, setError] = useState(null);\n  const query = new URLSearchParams(useLocation().search);\n  const page = query.get(\"page\");\n  const {dispatch} = useAppContext();\n  const {type} = useParams();\n\n\n  useEffect(() => {\n    dispatch({type: SET_PAGE_TITLE, value: i18n.t(\"pages.notice.archive\")});\n\n    uploadService.getUploads({\n      type: \"menu\",\n      category: type,\n      page,\n    }).then((u) => {\n      setUploads(u)\n    }, (err) => {\n      setError(err)\n    })\n  }, [dispatch, page, type, uploadService])\n\n  const calculateWeeksFromNow = (createdAt) => {\n    const createdDate = new Date(createdAt);\n    const now = new Date();\n    const diffInMilliseconds = now.getTime() - createdDate.getTime();\n    const diffInWeeks = Math.floor(diffInMilliseconds / (1000 * 60 * 60 * 24 * 7)); // Convert milliseconds to weeks\n    return diffInWeeks;\n  };\n\n  return uploads && (\n    <div className=\"container mx-auto py-4\">\n      <Error error={error}/>\n      <span className=\"form-title\">{i18n.t(`notice.${type}.archive`)}</span>\n      <div className=\"pt-4\">\n        <ul>\n          {uploads.data && uploads.data.map((u) => (\n            <li key={'most-' + u.id}>\n              <Link to={`/oznamy/${type}/${u.id}`}>{u.description} {calculateWeeksFromNow(u.created_at) > 0 ? `(pred ${calculateWeeksFromNow(u.created_at)} týždňami)` : null }</Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n      <Pagination page={uploads.page} total_pages={uploads.total_pages}/>\n    </div>\n  )\n}\n\nexport default ArchiveNotice\n"],"sourceRoot":""}